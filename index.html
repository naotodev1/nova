<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facilita+ - Assistente Digital Acess√≠vel</title>
    <meta name="description" content="Facilita+ - Assistente digital especializada para pessoas 60+, PCDs e iniciantes em tecnologia">
    <meta name="keywords" content="assistente digital, acessibilidade, 60+, idosos, tecnologia, chatbot">
    <meta name="author" content="ORPHEO Platforms">
    
    <!-- Favicons -->
    <link rel="icon" type="image/png+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%234F46E5'%3E%3Cpath d='M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z'/%3E%3C/svg%3E">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Custom Styles -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
        
        * {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
        }
        
        .animate-bounce-slow {
            animation: bounce 2s infinite;
        }
        
        .animate-pulse-slow {
            animation: pulse 3s ease-in-out infinite;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .chat-message {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .typing-indicator {
            animation: typing 1.5s ease-in-out infinite;
        }
        
        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }
        
        .voice-pulse {
            animation: voicePulse 1s ease-in-out infinite;
        }
        
        @keyframes voicePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        /* Accessibility improvements */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .bg-gradient-to-r,
            .bg-gradient-to-br,
            .bg-gradient-to-b {
                background: #000 !important;
                color: #fff !important;
                border: 2px solid #fff !important;
            }
        }
        
        /* Focus styles for accessibility */
        button:focus,
        input:focus,
        select:focus,
        textarea:focus {
            outline: 3px solid #4F46E5 !important;
            outline-offset: 2px !important;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen">
    <!-- Loading Screen -->
    <div id="loading" class="fixed inset-0 bg-white z-50 flex items-center justify-center">
        <div class="text-center">
            <div class="bg-gradient-to-br from-blue-400 to-purple-500 p-6 rounded-full mb-4 animate-pulse-slow mx-auto w-20 h-20 flex items-center justify-center">
                <img src="https://i.imgur.com/StKfniS.png" 
                     alt="Facilita+ Icon" 
                     class="w-10 h-10" />
            </div>
            <h1 class="text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2">Facilita+</h1>
            <p class="text-gray-600">Carregando sua assistente...</p>
            <div class="mt-4 flex justify-center gap-1">
                <div class="w-2 h-2 bg-blue-400 rounded-full animate-bounce" style="animation-delay: 0ms;"></div>
                <div class="w-2 h-2 bg-purple-400 rounded-full animate-bounce" style="animation-delay: 150ms;"></div>
                <div class="w-2 h-2 bg-pink-400 rounded-full animate-bounce" style="animation-delay: 300ms;"></div>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app" class="hidden min-h-screen">
        <!-- Welcome Screen -->
        <div id="welcome-view" class="min-h-screen flex flex-col justify-between">
            <div class="container mx-auto px-6 py-8">
                <div class="max-w-md mx-auto">
                    <!-- Logo e Apresenta√ß√£o -->
                    <div class="text-center mb-12">
                        <div class="bg-white p-8 rounded-3xl shadow-2xl mb-8">
                            <div class="flex items-center justify-center gap-3 mb-6">
                                <div class="bg-gradient-to-br from-blue-400 to-purple-500 rounded-full p-3 shadow-lg">
                                    <img src="https://i.imgur.com/StKfniS.png" 
                                         alt="Facilita+ Icon" 
                                         class="w-10 h-10" />
                                </div>
                                <div>
                                    <h1 class="text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                                        Facilita+
                                    </h1>
                                    <p class="text-gray-600 text-sm">Powered by ORPHEO Platforms</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-center gap-2 text-gray-600 mb-2">
                                <i data-lucide="star" class="w-5 h-5 text-yellow-500 fill-current"></i>
                                <i data-lucide="star" class="w-5 h-5 text-yellow-500 fill-current"></i>
                                <i data-lucide="star" class="w-5 h-5 text-yellow-500 fill-current"></i>
                                <i data-lucide="star" class="w-5 h-5 text-yellow-500 fill-current"></i>
                                <i data-lucide="star" class="w-5 h-5 text-yellow-500 fill-current"></i>
                            </div>
                            <p class="text-lg text-gray-600 font-medium">
                                Assistente Digital Especializada para 60+
                            </p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-2xl shadow-lg mb-8">
                            <h2 class="text-2xl font-bold text-gray-800 mb-3">
                                üëã Ol√°, <span id="welcome-name">Visitante</span>!
                            </h2>
                            <p class="text-xl text-gray-700 leading-relaxed">
                                Estou aqui para tornar sua vida mais f√°cil e organizada! üíô
                            </p>
                        </div>
                    </div>

                    <!-- Status do Sistema -->
                    <div class="bg-white p-4 rounded-2xl shadow-lg mb-8">
                        <div class="flex items-center justify-between mb-3">
                            <span class="text-lg font-semibold text-gray-800">Status do Sistema</span>
                            <span class="flex items-center gap-1 text-green-600 font-semibold">
                                <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                                Online
                            </span>
                        </div>
                        <div class="grid grid-cols-3 gap-4 text-center">
                            <div>
                                <i data-lucide="thermometer" class="w-6 h-6 text-blue-500 mx-auto mb-1"></i>
                                <p class="text-sm text-gray-600" id="current-temp">24¬∞C</p>
                            </div>
                            <div>
                                <i data-lucide="clock" class="w-6 h-6 text-purple-500 mx-auto mb-1"></i>
                                <p class="text-sm text-gray-600" id="current-time">--:--</p>
                            </div>
                            <div>
                                <i data-lucide="calendar" class="w-6 h-6 text-green-500 mx-auto mb-1"></i>
                                <p class="text-sm text-gray-600" id="current-date">--/--</p>
                            </div>
                        </div>
                    </div>

                    <!-- Bot√£o Principal -->
                    <button
                        onclick="showView('main')"
                        class="w-full bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white text-2xl font-bold py-8 px-8 rounded-3xl shadow-2xl transform transition-all duration-300 hover:scale-105 hover:shadow-3xl mb-4"
                        aria-label="Come√ßar conversa com a assistente"
                    >
                        <div class="flex items-center justify-center gap-3">
                            <img src="https://i.imgur.com/StKfniS.png" 
                                 alt="Facilita+ Icon" 
                                 class="w-10 h-10" />
                            Come√ßar Conversa
                        </div>
                    </button>
                    <!-- Termos de Uso -->
                    <p class="text-center text-sm text-gray-600 leading-relaxed mt-4">
                        Ao me utilizar, voc√™ concorda com os <a href="https://naotodev1.github.io/terms-e-policy" target="_blank" class="text-blue-600 hover:underline font-semibold">Termos de Uso e Condi√ß√µes</a>.
                    </p>
                </div>
            </div>
            
            <!-- Footer -->
            <div class="bg-gradient-to-r from-gray-100 to-gray-200 border-t-2 border-gray-300 py-4 px-6 mt-auto">
                <div class="max-w-md mx-auto">
                    <div class="text-center space-y-2">
                        <div class="flex items-center justify-center gap-2 text-gray-600">
                            <i data-lucide="shield" class="w-4 h-4"></i>
                            <span class="text-sm font-medium">Powered by</span>
                        </div>
                        <div class="font-bold text-lg bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">
                            ORPHEO Platforms
                        </div>
                        <div class="text-xs text-gray-500">
                            v0.1.0 ‚Ä¢ Assistente Digital Acess√≠vel
                        </div>
                        <div class="flex items-center justify-center gap-4 text-xs text-gray-400">
                            <span class="flex items-center gap-1">
                                <i data-lucide="wifi" class="w-3 h-3"></i>
                                Online
                            </span>
                            <span class="flex items-center gap-1">
                                <i data-lucide="battery" class="w-3 h-3"></i>
                                Ativo
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Menu -->
        <div id="main-view" class="hidden min-h-screen flex flex-col">
            <!-- Header -->
            <div class="bg-white shadow-lg border-b-4 border-blue-100">
                <div class="max-w-md mx-auto p-4">
                    <div class="flex items-center justify-between">
                        <div></div>
                        
                        <div class="flex items-center justify-center gap-2">
                            <div class="bg-gradient-to-br from-blue-400 to-purple-500 rounded-full p-2 shadow-lg">
                                <img src="https://i.imgur.com/StKfniS.png" 
                                     alt="Facilita+ Icon" 
                                     class="w-6 h-6" />
                            </div>
                            <div>
                                <h1 class="text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                                    Facilita+
                                </h1>
                            </div>
                        </div>
                        
                        <button
                            onclick="toggleProfile()"
                            class="bg-gray-100 hover:bg-gray-200 text-gray-600 p-3 rounded-full shadow-md transition-all duration-200 hover:scale-105"
                            aria-label="Abrir perfil do usu√°rio"
                        >
                            <i data-lucide="user" class="w-6 h-6"></i>
                        </button>
                    </div>
                    
                    <div class="text-center mt-4">
                        <h2 class="text-xl font-bold text-gray-800">Escolha como posso te ajudar hoje</h2>
                    </div>
                </div>
            </div>
            
            <div class="flex-1 p-6 overflow-y-auto">
                <div class="max-w-md mx-auto space-y-6">
                    <!-- Status e Sauda√ß√£o -->
                    <div class="bg-white p-6 rounded-3xl shadow-lg">
                        <div class="text-center">
                            <h3 class="text-2xl font-bold text-gray-800 mb-2">
                                <span id="greeting">Ol√°</span>, <span id="main-username">querido(a)</span>! üåü
                            </h3>
                            <p class="text-lg text-gray-600 leading-relaxed">
                                Como posso te ajudar neste <span id="current-weekday">dia</span>? üòä
                            </p>
                        </div>
                    </div>

                    <!-- Bot√µes de A√ß√£o Principal -->
                    <div class="grid gap-4">
                        <button
                            onclick="quickAction('chat')"
                            class="bg-gradient-to-r from-blue-400 to-blue-600 hover:from-blue-500 hover:to-blue-700 text-white text-xl font-bold py-6 px-6 rounded-3xl shadow-lg transform transition-all duration-200 hover:scale-105 flex items-center justify-center gap-3"
                            aria-label="Iniciar conversa com a assistente"
                        >
                            <img src="https://i.imgur.com/StKfniS.png" 
                                 alt="Facilita+ Icon" 
                                 class="w-7 h-7" />
                            Conversar Comigo
                        </button>

                        <div class="grid grid-cols-2 gap-4">
                            <button
                                onclick="quickAction('reminder')"
                                class="bg-gradient-to-r from-purple-400 to-purple-600 hover:from-purple-500 hover:to-purple-700 text-white text-lg font-bold py-6 px-4 rounded-3xl shadow-lg transform transition-all duration-200 hover:scale-105 flex flex-col items-center gap-2"
                                aria-label="Criar um novo lembrete"
                            >
                                <i data-lucide="clock" class="w-6 h-6"></i>
                                Criar Lembrete
                            </button>

                            <button
                                onclick="quickAction('phone-help')"
                                class="bg-gradient-to-r from-orange-400 to-orange-600 hover:from-orange-500 hover:to-orange-700 text-white text-lg font-bold py-6 px-4 rounded-3xl shadow-lg transform transition-all duration-200 hover:scale-105 flex flex-col items-center gap-2"
                                aria-label="Obter ajuda com o celular"
                            >
                                <i data-lucide="phone" class="w-6 h-6"></i>
                                Ajuda Celular
                            </button>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <button
                                onclick="quickAction('sad')"
                                class="bg-gradient-to-r from-pink-400 to-pink-600 hover:from-pink-500 hover:to-pink-700 text-white text-lg font-bold py-6 px-4 rounded-3xl shadow-lg transform transition-all duration-200 hover:scale-105 flex flex-col items-center gap-2"
                                aria-label="Obter apoio emocional"
                            >
                                <i data-lucide="heart" class="w-6 h-6"></i>
                                Apoio Emocional
                            </button>

                            <button
                                onclick="quickAction('emergency')"
                                class="bg-gradient-to-r from-red-400 to-red-600 hover:from-red-500 hover:to-red-700 text-white text-lg font-bold py-6 px-4 rounded-3xl shadow-lg transform transition-all duration-200 hover:scale-105 flex flex-col items-center gap-2"
                                aria-label="Informa√ß√µes de emerg√™ncia"
                            >
                                <i data-lucide="alert-circle" class="w-6 h-6"></i>
                                Emerg√™ncia
                            </button>
                        </div>
                        
                        <!-- Novo Bot√£o de Feedback -->
                        <button
                            onclick="openFeedbackForm()"
                            class="w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white text-xl font-bold py-6 px-6 rounded-3xl shadow-lg transform transition-all duration-200 hover:scale-105 flex items-center justify-center gap-3"
                            aria-label="Enviar Feedback"
                        >
                            <i data-lucide="message-square-text" class="w-7 h-7"></i>
                            Enviar Feedback
                        </button>
                    </div>

                    <!-- Se√ß√£o Motivacional -->
                    <div class="bg-gradient-to-r from-yellow-100 via-orange-100 to-pink-100 p-6 rounded-3xl shadow-lg text-center">
                        <div class="mb-4">
                            <div class="text-4xl mb-2">üåü</div>
                            <p class="text-xl font-bold text-gray-800 mb-2">
                                Voc√™ est√° indo muito bem hoje!
                            </p>
                            <p class="text-lg text-gray-700 mb-4" id="motivational-suggestion">
                                Que tal tomar uma √°gua ou fazer um lanche gostoso? üíß‚ú®
                            </p>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-3">
                            <button
                                onclick="getMotivationalPhrase()"
                                class="bg-gradient-to-r from-yellow-400 to-orange-400 hover:from-yellow-500 hover:to-orange-500 text-gray-800 text-sm font-bold py-3 px-4 rounded-2xl shadow-md transform transition-all duration-200 hover:scale-105"
                                aria-label="Receber uma frase motivacional"
                            >
                                ‚ú® Frase Bonita
                            </button>
                            
                            <button
                                onclick="quickAction('weather')"
                                class="bg-gradient-to-r from-blue-300 to-cyan-400 hover:from-blue-400 hover:to-cyan-500 text-gray-800 text-sm font-bold py-3 px-4 rounded-2xl shadow-md transform transition-all duration-200 hover:scale-105"
                                aria-label="Ver informa√ß√µes do tempo"
                            >
                                üå§Ô∏è Como est√° o tempo
                            </button>
                        </div>
                    </div>

                    <!-- Lembretes Ativos -->
                    <div id="active-reminders" class="hidden bg-white p-6 rounded-3xl shadow-lg">
                        <div class="flex items-center gap-3 mb-4">
                            <i data-lucide="bell" class="text-purple-500 w-6 h-6"></i>
                            <h3 class="text-xl font-bold text-gray-800">Seus Lembretes</h3>
                        </div>
                        <div id="reminders-list" class="space-y-3">
                            <!-- Lembretes ser√£o inseridos aqui dinamicamente -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Footer -->
            <div class="bg-gradient-to-r from-gray-100 to-gray-200 border-t-2 border-gray-300 py-4 px-6 mt-auto">
                <div class="max-w-md mx-auto">
                    <div class="text-center space-y-2">
                        <div class="flex items-center justify-center gap-2 text-gray-600">
                            <i data-lucide="shield" class="w-4 h-4"></i>
                            <span class="text-sm font-medium">Powered by</span>
                        </div>
                        <div class="font-bold text-lg bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">
                            ORPHEO Platforms
                        </div>
                        <div class="text-xs text-gray-500">
                            v0.1.0 ‚Ä¢ Assistente Digital Acess√≠vel
                        </div>
                        <div class="flex items-center justify-center gap-4 text-xs text-gray-400">
                            <span class="flex items-center gap-1">
                                <i data-lucide="wifi" class="w-3 h-3"></i>
                                Online
                            </span>
                            <span class="flex items-center gap-1">
                                <i data-lucide="battery" class="w-3 h-3"></i>
                                Ativo
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat View -->
        <div id="chat-view" class="hidden min-h-screen flex flex-col">
            <!-- Header -->
            <div class="bg-white shadow-lg border-b-4 border-blue-100">
                <div class="max-w-md mx-auto p-4">
                    <div class="flex items-center justify-between">
                        <button
                            onclick="showView('main')"
                            class="bg-blue-100 hover:bg-blue-200 text-blue-600 p-3 rounded-full shadow-md transition-all duration-200 hover:scale-105"
                            aria-label="Voltar para o menu principal"
                        >
                            <i data-lucide="home" class="w-6 h-6"></i>
                        </button>
                        
                        <div class="flex items-center justify-center gap-2">
                            <div class="bg-gradient-to-br from-blue-400 to-purple-500 rounded-full p-2 shadow-lg">
                                <img src="https://i.imgur.com/StKfniS.png" 
                                     alt="Facilita+ Icon" 
                                     class="w-6 h-6" />
                            </div>
                            <div>
                                <h1 class="text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                                    Facilita+
                                </h1>
                            </div>
                        </div>
                        
                        <button
                            onclick="toggleProfile()"
                            class="bg-gray-100 hover:bg-gray-200 text-gray-600 p-3 rounded-full shadow-md transition-all duration-200 hover:scale-105"
                            aria-label="Abrir perfil do usu√°rio"
                        >
                            <i data-lucide="user" class="w-6 h-6"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- √Årea de Mensagens -->
            <div class="flex-1 overflow-y-auto p-4" id="messages-container">
                <div class="max-w-md mx-auto space-y-6 pb-6">
                    <!-- Mensagem de boas-vindas inicial -->
                    <div id="welcome-chat-message" class="bg-white p-6 rounded-3xl shadow-lg text-center">
                        <div class="text-4xl mb-4">üí¨</div>
                        <h3 class="text-2xl font-bold text-gray-800 mb-3">
                            Ol√°! Vamos conversar? üòä
                        </h3>
                        <p class="text-lg text-gray-600 leading-relaxed">
                            Estou aqui para te ajudar com qualquer coisa! Pode me perguntar sobre o celular, criar lembretes, ou s√≥ bater um papo gostoso mesmo! üíô
                        </p>
                    </div>
                    
                    <!-- Mensagens do chat ser√£o inseridas aqui -->
                    <div id="chat-messages"></div>
                    
                    <!-- Indicador de digita√ß√£o -->
                    <div id="typing-indicator" class="hidden flex justify-start">
                        <div class="bg-white px-6 py-4 rounded-3xl shadow-lg border-2 border-blue-100">
                            <div class="flex items-center gap-2">
                                <div class="flex gap-1">
                                    <div class="w-2 h-2 bg-blue-400 rounded-full animate-bounce typing-indicator" style="animation-delay: 0ms;"></div>
                                    <div class="w-2 h-2 bg-blue-400 rounded-full animate-bounce typing-indicator" style="animation-delay: 150ms;"></div>
                                    <div class="w-2 h-2 bg-blue-400 rounded-full animate-bounce typing-indicator" style="animation-delay: 300ms;"></div>
                                </div>
                                <span class="text-blue-600 text-lg">Digitando...</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Bot√£o Explicar de Novo -->
                    <div id="explain-again-container" class="hidden text-center">
                        <button
                            onclick="explainAgain()"
                            class="bg-gradient-to-r from-yellow-400 to-orange-400 hover:from-yellow-500 hover:to-orange-500 text-gray-800 text-lg font-bold py-4 px-6 rounded-full shadow-lg transform transition-all duration-200 hover:scale-105 inline-flex items-center gap-3"
                            aria-label="Pedir para explicar novamente mais devagar"
                        >
                            <i data-lucide="rotate-ccw" class="w-6 h-6"></i>
                            Explicar de novo mais devagar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Bot√µes de Ajuda R√°pida e Input -->
            <div class="bg-white border-t-4 border-blue-100 p-4">
                <div class="max-w-md mx-auto">
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <button
                            onclick="quickChatAction('reminder')"
                            class="bg-gradient-to-r from-purple-400 to-purple-600 hover:from-purple-500 hover:to-purple-700 text-white text-sm font-bold py-3 px-4 rounded-2xl shadow-md transform transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2"
                            aria-label="Criar lembrete pelo chat"
                        >
                            <i data-lucide="clock" class="w-4 h-4"></i>
                            Lembrete
                        </button>
                        
                        <button
                            onclick="quickChatAction('phone-help')"
                            class="bg-gradient-to-r from-orange-400 to-orange-600 hover:from-orange-500 hover:to-orange-700 text-white text-sm font-bold py-3 px-4 rounded-2xl shadow-md transform transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2"
                            aria-label="Pedir ajuda com celular pelo chat"
                        >
                            <i data-lucide="phone" class="w-4 h-4"></i>
                            Ajuda Celular
                        </button>
                        
                        <button
                            onclick="quickChatAction('sad')"
                            class="bg-gradient-to-r from-pink-400 to-pink-600 hover:from-pink-500 hover:to-pink-700 text-white text-sm font-bold py-3 px-4 rounded-2xl shadow-md transform transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2"
                            aria-label="Pedir apoio emocional pelo chat"
                        >
                            <i data-lucide="heart" class="w-4 h-4"></i>
                            Estou triste
                        </button>
                        
                        <button
                            onclick="quickChatAction('person')"
                            class="bg-gradient-to-r from-red-400 to-red-600 hover:from-red-500 hover:to-red-700 text-white text-sm font-bold py-3 px-4 rounded-2xl shadow-md transform transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2"
                            aria-label="Pedir para falar com pessoa real"
                        >
                            <i data-lucide="user" class="w-4 h-4"></i>
                            Falar com Pessoa
                        </button>
                    </div>

                    <!-- Campo de Input -->
                    <div class="flex gap-3">
                        <div class="flex-1 relative">
                            <input
                                type="text"
                                id="message-input"
                                placeholder="Digite sua mensagem aqui..."
                                class="w-full text-xl p-4 pr-16 border-4 border-gray-200 rounded-2xl focus:border-blue-400 focus:outline-none placeholder-gray-400 bg-white shadow-md"
                                onkeypress="handleKeyPress(event)"
                                aria-label="Campo para digitar mensagem"
                            />
                            <button
                                id="clear-input"
                                onclick="clearInput()"
                                class="hidden absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-200"
                                aria-label="Limpar texto digitado"
                            >
                                <i data-lucide="x" class="w-5 h-5"></i>
                            </button>
                        </div>
                        
                        <button
                            id="voice-button"
                            onclick="toggleVoiceInput()"
                            class="p-4 rounded-2xl shadow-lg transform transition-all duration-200 hover:scale-105 bg-blue-100 text-blue-700 hover:bg-blue-200"
                            aria-label="Usar comando de voz"
                        >
                            <i data-lucide="mic" class="w-6 h-6"></i>
                        </button>
                        
                        <button
                            onclick="sendMessage()"
                            class="bg-gradient-to-r from-blue-400 to-purple-500 hover:from-blue-500 hover:to-purple-600 text-white p-4 rounded-2xl shadow-lg transform transition-all duration-200 hover:scale-105"
                            aria-label="Enviar mensagem"
                        >
                            <i data-lucide="send" class="w-6 h-6"></i>
                        </button>
                    </div>
                    
                    <!-- Dicas de Uso -->
                    <div class="mt-4 text-center">
                        <p class="text-sm text-gray-500 mb-2">üí° Dicas: Fale sobre qualquer assunto!</p>
                        <div class="flex flex-wrap justify-center gap-2">
                            <button onclick="setSuggestion('Como est√° o tempo?')" class="text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1 rounded-full transition-colors duration-200">Como est√° o tempo?</button>
                            <button onclick="setSuggestion('Conte uma hist√≥ria')" class="text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1 rounded-full transition-colors duration-200">Conte uma hist√≥ria</button>
                            <button onclick="setSuggestion('Como fazer uma liga√ß√£o?')" class="text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1 rounded-full transition-colors duration-200">Como fazer uma liga√ß√£o?</button>
                            <button onclick="setSuggestion('Estou com saudade')" class="text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1 rounded-full transition-colors duration-200">Estou com saudade</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reminder View -->
        <div id="reminder-view" class="hidden min-h-screen flex flex-col">
            <!-- Header -->
            <div class="bg-white shadow-lg border-b-4 border-blue-100">
                <div class="max-w-md mx-auto p-4">
                    <div class="flex items-center justify-between">
                        <button
                            onclick="showView('main')"
                            class="bg-blue-100 hover:bg-blue-200 text-blue-600 p-3 rounded-full shadow-md transition-all duration-200 hover:scale-105"
                            aria-label="Voltar para o menu principal"
                        >
                            <i data-lucide="home" class="w-6 h-6"></i>
                        </button>
                        
                        <div class="flex items-center justify-center gap-2">
                            <div class="bg-gradient-to-br from-blue-400 to-purple-500 rounded-full p-2 shadow-lg">
                                <img src="https://i.imgur.com/StKfniS.png" 
                                     alt="Facilita+ Icon" 
                                     class="w-6 h-6" />
                            </div>
                            <div>
                                <h1 class="text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                                    Facilita+
                                </h1>
                            </div>
                        </div>
                        
                        <button
                            onclick="toggleProfile()"
                            class="bg-gray-100 hover:bg-gray-200 text-gray-600 p-3 rounded-full shadow-md transition-all duration-200 hover:scale-105"
                            aria-label="Abrir perfil do usu√°rio"
                        >
                            <i data-lucide="user" class="w-6 h-6"></i>
                        </button>
                    </div>
                    
                    <div class="text-center mt-4">
                        <h2 class="text-xl font-bold text-gray-800">üß† Criar Novo Lembrete</h2>
                    </div>
                </div>
            </div>
            
            <div class="flex-1 p-6 overflow-y-auto">
                <div class="max-w-md mx-auto space-y-8">
                    <!-- Instru√ß√£o Amig√°vel -->
                    <div class="bg-white p-6 rounded-3xl shadow-lg text-center">
                        <div class="text-4xl mb-4">‚è∞</div>
                        <h3 class="text-2xl font-bold text-gray-800 mb-3">
                            Vamos criar seu lembrete!
                        </h3>
                        <p class="text-lg text-gray-600 leading-relaxed">
                            Me conte o que voc√™ quer lembrar e eu vou te avisar na hora certa! üòä
                        </p>
                    </div>

                    <!-- Formul√°rio de Lembrete -->
                    <div class="space-y-6">
                        <!-- Pergunta 1 - O que lembrar -->
                        <div class="bg-white p-6 rounded-3xl shadow-lg">
                            <label class="block text-2xl font-bold text-gray-800 mb-4" for="reminder-text">
                                üí≠ O que voc√™ quer lembrar?
                            </label>
                            <input
                                type="text"
                                id="reminder-text"
                                placeholder="Ex: Tomar rem√©dio da press√£o"
                                class="w-full text-2xl p-4 border-4 border-gray-200 rounded-2xl focus:border-purple-400 focus:outline-none placeholder-gray-400"
                                oninput="updateReminderPreview()"
                                aria-label="Digite o que deseja lembrar"
                            />
                            
                            <!-- Sugest√µes r√°pidas -->
                            <div class="mt-4 grid grid-cols-1 gap-2">
                                <button onclick="setReminderText('Tomar rem√©dio da press√£o')" class="text-left p-3 bg-purple-50 hover:bg-purple-100 rounded-xl text-gray-700 transition-colors duration-200">üí° Tomar rem√©dio da press√£o</button>
                                <button onclick="setReminderText('Beber √°gua')" class="text-left p-3 bg-purple-50 hover:bg-purple-100 rounded-xl text-gray-700 transition-colors duration-200">üí° Beber √°gua</button>
                                <button onclick="setReminderText('Ligar para o m√©dico')" class="text-left p-3 bg-purple-50 hover:bg-purple-100 rounded-xl text-gray-700 transition-colors duration-200">üí° Ligar para o m√©dico</button>
                                <button onclick="setReminderText('Fazer exerc√≠cios')" class="text-left p-3 bg-purple-50 hover:bg-purple-100 rounded-xl text-gray-700 transition-colors duration-200">üí° Fazer exerc√≠cios</button>
                                <button onclick="setReminderText('Tomar vitamina')" class="text-left p-3 bg-purple-50 hover:bg-purple-100 rounded-xl text-gray-700 transition-colors duration-200">üí° Tomar vitamina</button>
                            </div>
                            
                            <div class="mt-4 flex gap-3">
                                <button
                                    id="voice-reminder-button"
                                    onclick="voiceReminderInput()"
                                    class="flex items-center justify-center gap-2 px-6 py-3 rounded-2xl text-lg font-bold transition-all duration-200 bg-blue-100 text-blue-700 hover:bg-blue-200"
                                    aria-label="Usar comando de voz para lembrete"
                                >
                                    <i data-lucide="mic" class="w-6 h-6"></i>
                                    Falar
                                </button>
                                
                                <button
                                    onclick="clearReminderText()"
                                    class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-3 rounded-2xl text-lg font-bold transition-colors duration-200"
                                    aria-label="Limpar texto do lembrete"
                                >
                                    üóëÔ∏è Limpar
                                </button>
                            </div>
                        </div>

                        <!-- Pergunta 2 - Hor√°rio -->
                        <div class="bg-white p-6 rounded-3xl shadow-lg">
                            <label class="block text-2xl font-bold text-gray-800 mb-4" for="reminder-time">
                                ‚è∞ Que horas voc√™ quer ser lembrado?
                            </label>
                            
                            <!-- Rel√≥gio Visual -->
                            <div class="flex justify-center mb-6">
                                <div class="bg-gradient-to-br from-blue-400 to-purple-500 text-white p-8 rounded-3xl text-center shadow-xl">
                                    <div class="text-6xl font-mono font-bold mb-2" id="visual-time">
                                        14:00
                                    </div>
                                    <div class="text-2xl">‚è∞</div>
                                    <div class="text-lg mt-2 opacity-90" id="visual-time-formatted">
                                        14:00
                                    </div>
                                </div>
                            </div>
                            
                            <input
                                type="time"
                                id="reminder-time"
                                value="14:00"
                                class="w-full text-3xl p-4 border-4 border-gray-200 rounded-2xl focus:border-purple-400 focus:outline-none text-center font-mono"
                                onchange="updateVisualTime()"
                                aria-label="Selecionar hor√°rio do lembrete"
                            />
                            
                            <!-- Hor√°rios sugeridos -->
                            <div class="mt-4 grid grid-cols-3 gap-2">
                                <button onclick="setReminderTime('08:00')" class="p-3 bg-purple-50 hover:bg-purple-100 rounded-xl text-purple-700 font-bold transition-colors duration-200">08:00</button>
                                <button onclick="setReminderTime('12:00')" class="p-3 bg-purple-50 hover:bg-purple-100 rounded-xl text-purple-700 font-bold transition-colors duration-200">12:00</button>
                                <button onclick="setReminderTime('18:00')" class="p-3 bg-purple-50 hover:bg-purple-100 rounded-xl text-purple-700 font-bold transition-colors duration-200">18:00</button>
                                <button onclick="setReminderTime('20:00')" class="p-3 bg-purple-50 hover:bg-purple-100 rounded-xl text-purple-700 font-bold transition-colors duration-200">20:00</button>
                                <button onclick="setReminderTime('22:00')" class="p-3 bg-purple-50 hover:bg-purple-100 rounded-xl text-purple-700 font-bold transition-colors duration-200">22:00</button>
                                <button onclick="setReminderTime('06:00')" class="p-3 bg-purple-50 hover:bg-purple-100 rounded-xl text-purple-700 font-bold transition-colors duration-200">06:00</button>
                            </div>
                        </div>

                        <!-- Preview do Lembrete -->
                        <div id="reminder-preview" class="hidden bg-gradient-to-r from-green-50 to-blue-50 p-6 rounded-3xl shadow-lg border-2 border-green-200">
                            <h4 class="text-lg font-bold text-gray-800 mb-3 flex items-center gap-2">
                                üëÅÔ∏è Como vai ficar seu lembrete:
                            </h4>
                            <div class="bg-white p-4 rounded-2xl shadow-sm">
                                <div class="flex items-center gap-3">
                                    <div class="bg-purple-100 p-3 rounded-full">
                                        <i data-lucide="bell" class="text-purple-600 w-6 h-6"></i>
                                    </div>
                                    <div>
                                        <p class="text-xl font-semibold text-gray-800" id="preview-text">Digite algo acima</p>
                                        <p class="text-purple-600 font-bold" id="preview-time">‚è∞ 14:00</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bot√µes de A√ß√£o -->
                    <div class="space-y-4">
                        <button
                            id="create-reminder-btn"
                            onclick="createReminder()"
                            disabled
                            class="w-full bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 disabled:from-gray-300 disabled:to-gray-400 text-white text-2xl font-bold py-6 px-6 rounded-3xl shadow-lg transform transition-all duration-300 hover:scale-105 disabled:hover:scale-100 disabled:cursor-not-allowed flex items-center justify-center gap-3"
                            aria-label="Criar o lembrete"
                        >
                            <i data-lucide="plus" class="w-8 h-8"></i>
                            <span id="create-btn-text">Criar Lembrete</span>
                        </button>

                        <button
                            onclick="showView('main')"
                            class="w-full bg-gray-400 hover:bg-gray-500 text-white text-xl font-bold py-4 px-6 rounded-3xl shadow-lg transform transition-all duration-200 hover:scale-105"
                            aria-label="Voltar ao menu principal"
                        >
                            ‚Üê Voltar ao In√≠cio
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div id="profile-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-3xl shadow-2xl max-w-sm w-full mx-4">
            <div class="p-6">
                <div class="text-center mb-6">
                    <div class="bg-gradient-to-br from-blue-400 to-purple-500 w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center">
                        <i data-lucide="user" class="text-white w-10 h-10"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800" id="profile-name">
                        Visitante
                    </h3>
                    <p class="text-gray-600">Usu√°rio do Facilita+</p>
                </div>
                
                <div class="space-y-4 mb-6">
                    <div class="bg-blue-50 p-4 rounded-2xl">
                        <div class="flex items-center gap-3 mb-2">
                            <i data-lucide="bell" class="text-blue-600 w-5 h-5"></i>
                            <span class="font-semibold text-gray-800">Lembretes Ativos</span>
                        </div>
                        <p class="text-lg font-bold text-blue-600" id="profile-reminders-count">0</p>
                    </div>
                    
                    <div class="bg-green-50 p-4 rounded-2xl">
                        <div class="flex items-center gap-3 mb-2">
                            <img src="https://i.imgur.com/StKfniS.png" alt="Facilita+ Icon" class="w-5 h-5" />
                            <span class="font-semibold text-gray-800">Conversas</span>
                        </div>
                        <p class="text-lg font-bold text-green-600" id="profile-conversations-count">0</p>
                    </div>
                </div>
                
                <div class="space-y-3">
                    <div id="name-input-section">
                        <label class="block text-sm font-bold text-gray-700 mb-2" for="user-name-input">
                            Como gostaria de ser chamado(a)?
                        </label>
                        <input
                            type="text"
                            id="user-name-input"
                            placeholder="Digite seu nome"
                            class="w-full p-3 border-2 border-gray-200 rounded-xl text-lg"
                            onkeypress="handleNameKeyPress(event)"
                            aria-label="Digite seu nome"
                        />
                    </div>
                    
                    <button
                        onclick="closeProfile()"
                        class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-xl transition-all duration-200"
                        aria-label="Fechar perfil"
                    >
                        Fechar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Global Variables
        let currentView = 'welcome';
        let userName = localStorage.getItem('userName') || '';
        let messages = [];
        let reminders = JSON.parse(localStorage.getItem('reminders') || '[]');
        let isListening = false;
        let isTyping = false;
        let recognition = null;
        let speechSynthesis = window.speechSynthesis;

        // Motivational phrases
        const motivationalPhrases = [
            "Voc√™ √© especial e merece todo carinho do mundo! üíô",
            "Cada dia √© uma nova oportunidade para sorrir! üòä",
            "Voc√™ est√° fazendo um √≥timo trabalho cuidando de si! ‚≠ê",
            "Lembre-se: voc√™ √© amado(a) e importante! ‚ù§Ô∏è",
            "Sua presen√ßa faz o mundo mais bonito! üåü",
            "Hoje √© um bom dia para ser feliz! üåû",
            "Voc√™ tem uma luz especial que ilumina quem est√° ao seu redor! ‚ú®",
            "Cada pequeno passo que voc√™ d√° √© uma vit√≥ria! üèÜ",
            "Sua sabedoria e experi√™ncia s√£o tesouros preciosos! üíé",
            "O mundo √© mais colorido com voc√™ nele! üåà"
        ];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Lucide icons
            lucide.createIcons();
            
            // Load user name if exists
            if (userName) {
                document.getElementById('welcome-name').textContent = userName;
                document.getElementById('profile-name').textContent = userName;
                document.getElementById('main-username').textContent = userName;
            }
            
            // Update time and date
            updateDateTime();
            setInterval(updateDateTime, 1000); // This runs every second, updating time/date, not an infinite loop.
            
            // Initialize speech recognition if available
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition;
                recognition = new SpeechRecognition();
                recognition.lang = 'pt-BR';
                recognition.continuous = false;
                recognition.interimResults = false;
            }
            
            // Update reminders count
            updateRemindersDisplay();
            
            // Hide loading screen
            setTimeout(() => {
                document.getElementById('loading').classList.add('hidden');
                document.getElementById('app').classList.remove('hidden');
            }, 2000);
        });

        // Update date and time
        function updateDateTime() {
            const now = new Date();
            const time = now.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
            const date = now.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' });
            const weekday = now.toLocaleDateString('pt-BR', { weekday: 'long' });
            const hour = now.getHours();
            
            document.getElementById('current-time').textContent = time;
            document.getElementById('current-date').textContent = date;
            document.getElementById('current-weekday').textContent = weekday;
            
            // Update greeting based on time
            let greeting = 'Ol√°';
            let suggestion = 'Que tal tomar uma √°gua ou fazer um lanche gostoso? üíß‚ú®';
            
            if (hour < 12) {
                greeting = 'Bom dia';
                suggestion = 'Que tal tomar um caf√© da manh√£ gostoso? ‚òïüåÖ';
            } else if (hour < 18) {
                greeting = 'Boa tarde';
                suggestion = 'Que tal um lanchinho da tarde? üç™‚òï';
            } else {
                greeting = 'Boa noite';
                suggestion = 'Que tal relaxar um pouquinho? üåô‚ú®';
            }
            
            document.getElementById('greeting').textContent = greeting;
            if (document.getElementById('motivational-suggestion')) {
                document.getElementById('motivational-suggestion').textContent = suggestion;
            }
        }

        // Show different views
        function showView(view) {
            // Hide all views
            document.getElementById('welcome-view').classList.add('hidden');
            document.getElementById('main-view').classList.add('hidden');
            document.getElementById('chat-view').classList.add('hidden');
            document.getElementById('reminder-view').classList.add('hidden');
            
            // Show selected view
            document.getElementById(view + '-view').classList.remove('hidden');
            currentView = view;
            
            // Clear chat if switching to chat view and no messages yet
            if (view === 'chat' && messages.length === 0) {
                document.getElementById('welcome-chat-message').classList.remove('hidden');
            } else if (view === 'chat' && messages.length > 0) {
                document.getElementById('welcome-chat-message').classList.add('hidden');
            }
        }

        // Open Feedback Form
        function openFeedbackForm() {
            window.open('https://docs.google.com/forms/d/e/1FAIpQLSfZ0Lbr_xsrus2DAKYTOHf_zn3DHKwx8Fwtv-89Q55ivZqzqA/viewform?usp=header', '_blank');
        }

        // Quick actions from main menu
        function quickAction(action) {
            switch(action) {
                case 'reminder':
                    showView('reminder');
                    break;
                case 'phone-help':
                    showView('chat');
                    addUserMessage("Preciso de ajuda com o celular");
                    setTimeout(() => {
                        addBotMessage("Claro! Vou te ajudar com o celular passo a passo. üì± O que voc√™ gostaria de aprender primeiro? \n\nüìû Fazer liga√ß√µes\nüí¨ Mandar mensagens (SMS ou WhatsApp)\nüì∏ Tirar fotos e gravar v√≠deos\nüåê Usar a internet para buscar informa√ß√µes\n‚öôÔ∏è Configura√ß√µes b√°sicas do aparelho\n\nMe fala o que te interessa mais! üòä");
                    }, 1500);
                    break;
                case 'sad':
                    showView('chat');
                    addUserMessage("Estou me sentindo triste hoje");
                    setTimeout(() => {
                        addBotMessage("Ah, meu querido... sinto muito que voc√™ esteja se sentindo assim. üíô √â completamente normal ter dias dif√≠ceis - todos n√≥s passamos por isso. Voc√™ quer conversar sobre o que est√° te deixando triste? Ou prefere que eu te conte algo alegre para animar seu cora√ß√£o? Lembre-se: voc√™ √© muito especial e amado! ü§óüíï");
                    }, 2000);
                    break;
                case 'chat':
                    showView('chat');
                    // Only add an initial message if the chat is truly empty, to avoid duplicates
                    if (messages.length === 0) {
                        addUserMessage("Oi! Quero bater um papo");
                        setTimeout(() => {
                            addBotMessage("Oi, querido(a)! üòä Que alegria te ver aqui! Adoro uma boa conversa. Como foi seu dia hoje? Aconteceu algo especial? Ou quer que eu te conte algumas novidades interessantes? Estou aqui para batermos um papo gostoso! ‚òïüíô");
                        }, 1500);
                    } else {
                         addBotMessage("De volta ao nosso chat! O que est√° na sua mente agora? üòä");
                    }
                    break;
                case 'weather':
                    showView('chat');
                    addUserMessage("Como est√° o tempo hoje?");
                    // This response would ideally come from an API. For now, it's static.
                    setTimeout(() => {
                        addBotMessage("Hoje est√° um dia ensolarado com 24¬∞C! ‚òÄÔ∏è Um dia lindo para sair um pouco. Que tal uma caminhada ou sentar no jardim? Voc√™ tem algum plano para hoje? üå§Ô∏è");
                    }, 1500);
                    break;
                case 'emergency':
                    showView('chat');
                    addUserMessage("Preciso de ajuda urgente");
                    setTimeout(() => {
                        addBotMessage("üö® Entendo que voc√™ precisa de ajuda! Se for uma emerg√™ncia m√©dica, ligue imediatamente para:\n\nüÜò SAMU: 192\nüöë Bombeiros: 193\nüëÆ Pol√≠cia: 190\n\nSe n√£o for uma emerg√™ncia vital, me conte o que aconteceu para eu te ajudar da melhor forma poss√≠vel. Estou aqui para voc√™! üíô");
                    }, 1500);
                    break;
            }
        }

        // Quick actions from chat
        function quickChatAction(action) {
            switch(action) {
                case 'reminder':
                    addUserMessage("Quero criar um lembrete");
                    setTimeout(() => {
                        addBotMessage("Perfeito! Vou te ajudar a criar um lembrete. Clique no bot√£o 'Criar Lembrete' aqui embaixo, ou me diga: o que voc√™ quer lembrar e que horas? üìù‚è∞");
                        setTimeout(() => showView('reminder'), 3000);
                    }, 1500);
                    break;
                case 'phone-help':
                    addUserMessage("Preciso de ajuda com o celular");
                    setTimeout(() => {
                        addBotMessage("Claro! Sou especialista em ajudar com o celular! üì± Me conte: voc√™ quer aprender a fazer liga√ß√µes, mandar mensagens, usar WhatsApp, tirar fotos, ou tem alguma dificuldade espec√≠fica? Vou te ensinar tudo passo a passo! üòä");
                    }, 1500);
                    break;
                case 'sad':
                    addUserMessage("Estou me sentindo triste");
                    setTimeout(() => {
                        addBotMessage("Ah, querido(a)... sinto muito que voc√™ esteja assim. üíô Voc√™ sabe que √© completamente normal ter dias dif√≠ceis, n√©? Todos passamos por isso. Quer conversar sobre o que est√° te deixando triste? Ou prefere que eu te conte algo alegre para animar seu cora√ß√£o? Estou aqui para te escutar com todo carinho! ü§ó‚ù§Ô∏è");
                    }, 1500);
                    break;
                case 'person':
                    addUserMessage("Preciso falar com uma pessoa");
                    setTimeout(() => {
                        addBotMessage("Entendo perfeitamente! √Äs vezes √© muito bom conversar com uma pessoa mesmo. üë•üíô\n\nVoc√™ pode:\nüìû Ligar para um familiar querido\nüë´ Procurar um amigo para conversar\nüè• Se for urgente, ligar 192 (SAMU)\nüöë Emerg√™ncia: 193 (Bombeiros)\nüëÆ Seguran√ßa: 190 (Pol√≠cia)\n\nTem algu√©m especial que voc√™ gostaria de ligar agora? Posso te ajudar a encontrar o n√∫mero ou te orientar como fazer a liga√ß√£o! üòä");
                    }, 1500);
                    break;
            }
        }

        // Generate intelligent bot response (EXPANDED)
        function generateResponse(userMessage) {
            const message = userMessage.toLowerCase();
            
            if (message.includes('oi') || message.includes('ol√°') || message.includes('bom dia') || message.includes('boa tarde') || message.includes('boa noite')) {
                return `Ol√°${userName ? ', ' + userName : ''}! üòä Que alegria te ver aqui! Como voc√™ est√° se sentindo hoje? Posso te ajudar com alguma coisa especial? üíô`;
            }
            
            if (message.includes('nome')) {
                return `Meu nome √© Facilita+! Sou sua assistente digital criada especialmente para te ajudar no dia a dia. E voc√™, qual √© o seu nome? Adoro conhecer pessoas especiais como voc√™! ü§ó`;
            }
            
            if (message.includes('idade') || message.includes('anos')) {
                return `Que pergunta interessante! A idade √© s√≥ um n√∫mero, o que importa mesmo √© como voc√™ se sente. Voc√™ tem a energia de quantos anos hoje? üòÑ‚ú®`;
            }
            
            if (message.includes('fam√≠lia') || message.includes('filho') || message.includes('neto')) {
                return `A fam√≠lia √© uma das maiores b√™n√ß√£os da vida! üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Conte-me sobre sua fam√≠lia. Tenho certeza de que voc√™ tem hist√≥rias lindas para compartilhar! üíù`;
            }
            
            if (message.includes('sa√∫de') || message.includes('m√©dico') || message.includes('rem√©dio')) {
                return `Cuidar da sa√∫de √© muito importante! üè• Se voc√™ tem d√∫vidas m√©dicas, sempre procure seu m√©dico de confian√ßa. Posso te ajudar a organizar seus rem√©dios ou criar lembretes. O que voc√™ precisa? üíä`;
            }
            
            if (message.includes('obrigad')) {
                return `Por nada! üòä Fico muito feliz em poder te ajudar! √â um prazer estar aqui para voc√™. Se precisar de mais alguma coisa, √© s√≥ falar! Estou sempre √† disposi√ß√£o! üíô`;
            }
            
            if (message.includes('tchau') || message.includes('at√© logo') || message.includes('despedida')) {
                return `At√© logo! üëã Foi maravilhoso conversar com voc√™! Volte sempre que quiser - estarei aqui te esperando com muito carinho! Cuide-se bem! üíô‚ú®`;
            }
            
            if (message.includes('triste') || message.includes('chateado') || message.includes('preocupado') || message.includes('solid√£o') || message.includes('sozinho')) {
                return `Sinto muito que voc√™ esteja se sentindo assim. üíô √â normal ter dias mais dif√≠ceis, e voc√™ n√£o est√° sozinho(a). Quer conversar sobre o que est√° te incomodando? √Äs vezes, desabafar ajuda bastante. Estou aqui para te escutar com todo carinho! ü§ó Que tal ouvir uma m√∫sica relaxante ou ver uma foto bonita?`;
            }
            
            if (message.includes('feliz') || message.includes('alegre') || message.includes('bem')) {
                return `Que maravilha saber que voc√™ est√° bem! üòä Sua alegria √© contagiante! Conte-me o que est√° deixando voc√™ t√£o feliz hoje? Adoro ouvir boas not√≠cias! üåü`;
            }
            
            if (message.includes('tempo') || message.includes('clima')) {
                return `Hoje est√° um dia ensolarado com 24¬∞C! ‚òÄÔ∏è Perfeito para uma caminhada! Como voc√™ gosta de aproveitar dias assim? (Lembre-se que essa √© uma previs√£o simples, para detalhes, consulte um app de clima!)`;
            }
            
            if (message.includes('ajuda') || message.includes('socorro') || message.includes('d√∫vida')) {
                return `Claro que vou te ajudar! üÜò Sou especialista em tornar as coisas mais f√°ceis. Me conta o que voc√™ precisa - pode ser ajuda com o celular, lembretes, ou apenas uma conversa. Estou aqui para voc√™! üí™`;
            }
            
            if (message.includes('celular') || message.includes('telefone') || message.includes('whatsapp') || message.includes('liga√ß√£o')) {
                return `Vou te ajudar com o celular! üì± √â normal ter dificuldades com a tecnologia. O que voc√™ gostaria de aprender? Fazer liga√ß√µes, mandar mensagens (SMS ou WhatsApp), tirar fotos, ou usar aplicativos? Vou explicar tudo passo a passo! üòä`;
            }

            if (message.includes('internet') || message.includes('site') || message.includes('navegar')) {
                return `A internet √© um mundo de informa√ß√µes! üåê Voc√™ quer aprender a pesquisar algo, ver not√≠cias, ou visitar algum site espec√≠fico? Posso te guiar sobre como usar o navegador para encontrar o que procura.`;
            }

            if (message.includes('email') || message.includes('e-mail')) {
                return `O e-mail √© √≥timo para se comunicar com amigos e familiares! üìß Voc√™ gostaria de aprender a enviar uma mensagem, ler suas caixas de entrada ou criar uma conta de e-mail? Posso te ajudar com isso!`;
            }

            if (message.includes('aplicativos') || message.includes('apps')) {
                return `Os aplicativos s√£o programas que deixam o celular mais divertido e √∫til! üì≤ Quais tipos de aplicativos te interessam? Posso te mostrar como instalar, usar ou desinstalar os apps que voc√™ quiser.`;
            }

            if (message.includes('not√≠cias') || message.includes('acontecendo')) {
                return `Ficar por dentro das not√≠cias √© muito bom! üì∞ Posso te indicar alguns sites ou aplicativos para ler as √∫ltimas novidades, ou podemos conversar sobre algum assunto que te interesse.`;
            }

            if (message.includes('exerc√≠cio') || message.includes('caminhada') || message.includes('movimentar')) {
                return `Fazer exerc√≠cios √© excelente para a sa√∫de e o humor! üö∂‚Äç‚ôÄÔ∏è Posso te dar algumas dicas de alongamentos leves, sugerir uma caminhada no parque, ou at√© mesmo indicar v√≠deos de exerc√≠cios para fazer em casa. O importante √© se movimentar!`;
            }

            if (message.includes('comer') || message.includes('comida') || message.includes('receita') || message.includes('alimenta√ß√£o')) {
                return `Hmmm, falando de comida me deu fome! üçΩÔ∏è Voc√™ gosta de cozinhar? Posso te dar algumas sugest√µes de receitas f√°ceis e gostosas para um caf√© da manh√£, almo√ßo ou jantar saud√°vel. O que voc√™ est√° com vontade de comer? üë©‚Äçüç≥`;
            }

            if (message.includes('rem√©dio') || message.includes('medicamento')) {
                return `Lembretes de rem√©dios s√£o cruciais para a sua sa√∫de! üíä Posso te ajudar a criar um lembrete para tomar seus medicamentos na hora certa. Qual rem√©dio e qual hor√°rio? Lembre-se sempre de seguir as orienta√ß√µes do seu m√©dico.`;
            }

            if (message.includes('social') || message.includes('amigos') || message.includes('facebook')) {
                return `Redes sociais s√£o √≥timas para manter contato com quem a gente gosta! üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Quer aprender a usar o Facebook, WhatsApp ou alguma outra rede para ver fotos dos seus amigos e familiares? Posso te ajudar a entender como funciona.`;
            }

            if (message.includes('dinheiro') || message.includes('banco') || message.includes('pagar')) {
                return `Cuidar do dinheiro √© importante. üí∞ Posso te dar dicas gerais sobre como organizar suas finan√ßas, usar aplicativos de banco (com seguran√ßa!), ou te explicar como pagar contas online. Lembre-se sempre de nunca compartilhar senhas ou dados pessoais.`;
            }

            if (message.includes('ler') || message.includes('livro') || message.includes('hist√≥ria')) {
                return `A leitura √© uma viagem maravilhosa! üìö Voc√™ gostaria que eu te contasse uma hist√≥ria curta, ou prefere que eu sugira alguns livros e autores interessantes? Me diga o que te agrada mais!`;
            }

            if (message.includes('cuidar') || message.includes('pessoal') || message.includes('beleza')) {
                return `Cuidar de si √© um ato de carinho! ‚ú® Quer algumas dicas de cuidados com a pele, cabelo, ou talvez umas ideias para relaxar e se sentir melhor? Pequenos gestos fazem uma grande diferen√ßa no seu bem-estar!`;
            }
            
            // Extract name if provided
            if (message.includes('meu nome √©') || message.includes('me chamo')) {
                const nameMatch = userMessage.match(/(?:meu nome √©|me chamo) (\w+)/i);
                if (nameMatch) {
                    const extractedName = nameMatch[1];
                    userName = extractedName;
                    localStorage.setItem('userName', userName);
                    updateUserName();
                    return `Prazer em conhecer voc√™, ${extractedName}! üòä Que nome lindo! A partir de agora vou te chamar assim. Como posso te ajudar hoje, ${extractedName}? üíô`;
                }
            }
            
            // Default response
            return `Que interessante o que voc√™ disse! ü§î Conte-me mais sobre isso. Adoro nossas conversas - voc√™ sempre tem algo especial para compartilhar! Como posso te ajudar melhor? üòäüíô`;
        }

        // Chat functions
        function addUserMessage(text) {
            document.getElementById('welcome-chat-message').classList.add('hidden'); // Hide welcome message once user sends something
            const messageId = Date.now();
            const timestamp = new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
            
            messages.push({ id: messageId, text, isUser: true, timestamp });
            
            const messagesContainer = document.getElementById('chat-messages');
            const messageElement = document.createElement('div');
            messageElement.className = 'flex justify-end chat-message';
            messageElement.innerHTML = `
                <div class="max-w-xs px-6 py-4 rounded-3xl shadow-lg bg-gradient-to-r from-green-400 to-blue-500 text-white">
                    <p class="text-xl leading-relaxed whitespace-pre-line">${text}</p>
                    <p class="text-sm text-blue-100 mt-2">${timestamp}</p>
                </div>
            `;
            
            messagesContainer.appendChild(messageElement);
            scrollToBottom();
            showExplainAgainButton();
        }

        function addBotMessage(text) {
            document.getElementById('welcome-chat-message').classList.add('hidden'); // Hide welcome message once bot replies
            const messageId = Date.now();
            const timestamp = new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
            
            messages.push({ id: messageId, text, isUser: false, timestamp });
            
            const messagesContainer = document.getElementById('chat-messages');
            const messageElement = document.createElement('div');
            messageElement.className = 'flex justify-start chat-message';
            messageElement.innerHTML = `
                <div class="max-w-xs px-6 py-4 rounded-3xl shadow-lg relative bg-white text-gray-800 border-2 border-blue-100">
                    <p class="text-xl leading-relaxed whitespace-pre-line">${text}</p>
                    <p class="text-sm text-gray-500 mt-2">${timestamp}</p>
                    <button
                        onclick="speakText('${text.replace(/'/g, "\\'").replace(/"/g, '\\"')}')"
                        class="absolute -bottom-2 -right-2 bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-full shadow-lg transition-all duration-200 hover:scale-110"
                        title="Ouvir mensagem"
                        aria-label="Ouvir mensagem"
                    >
                        <i data-lucide="volume-2" class="w-5 h-5"></i>
                    </button>
                </div>
            `;
            
            messagesContainer.appendChild(messageElement);
            lucide.createIcons(); // Re-initialize icons for newly added elements
            scrollToBottom();
            showExplainAgainButton();
            
            // Auto-speak message
            setTimeout(() => speakText(text), 500);
        }

        function showTypingIndicator() {
            isTyping = true;
            document.getElementById('typing-indicator').classList.remove('hidden');
            scrollToBottom();
        }

        function hideTypingIndicator() {
            isTyping = false;
            document.getElementById('typing-indicator').classList.add('hidden');
        }

        // Renamed from hideWelcomeMessage to be more specific to chat
        function hideWelcomeChatMessage() {
            document.getElementById('welcome-chat-message').classList.add('hidden');
        }

        function showExplainAgainButton() {
            if (messages.length > 0) {
                document.getElementById('explain-again-container').classList.remove('hidden');
            }
        }

        function scrollToBottom() {
            const container = document.getElementById('messages-container');
            container.scrollTop = container.scrollHeight;
        }

        // Send message function
        async function sendMessage() { // Made async for potential future API calls
            const input = document.getElementById('message-input');
            const text = input.value.trim();
            
            if (text) {
                addUserMessage(text);
                input.value = '';
                updateInputButtons();
                
                showTypingIndicator();
                // Simulate network delay for bot response
                await new Promise(resolve => setTimeout(resolve, 1500 + Math.random() * 1000)); 
                
                const response = generateResponse(text);
                
                hideTypingIndicator();
                addBotMessage(response);
            }
        }

        // Handle Enter key in chat
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Update input buttons
        function updateInputButtons() {
            const input = document.getElementById('message-input');
            const clearButton = document.getElementById('clear-input');
            
            if (input.value.trim()) {
                clearButton.classList.remove('hidden');
            } else {
                clearButton.classList.add('hidden');
            }
        }

        // Clear input
        function clearInput() {
            document.getElementById('message-input').value = '';
            updateInputButtons();
        }

        // Set suggestion in input
        function setSuggestion(text) {
            document.getElementById('message-input').value = text;
            updateInputButtons();
        }

        // Voice functions
        function toggleVoiceInput() {
            if (recognition) {
                if (isListening) {
                    stopListening();
                } else {
                    startListening();
                }
            } else {
                // Fallback for browsers without Web Speech API
                alert('Seu navegador n√£o suporta reconhecimento de voz. Por favor, digite sua mensagem.');
            }
        }

        function startListening() {
            if (recognition && !isListening) { // Ensure not to start if already listening
                isListening = true;
                const voiceButton = document.getElementById('voice-button');
                voiceButton.classList.add('voice-pulse', 'bg-red-400', 'text-white');
                voiceButton.classList.remove('bg-blue-100', 'text-blue-700');
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('message-input').value = transcript;
                    updateInputButtons();
                    stopListening(); // Stop after result
                };
                
                recognition.onerror = function(event) {
                    console.error('Speech recognition error:', event.error);
                    stopListening();
                    alert('N√£o consegui ouvir bem. Tente novamente ou digite sua mensagem!');
                };
                
                recognition.onend = function() {
                    isListening = false; // Ensure isListening is false when recognition ends naturally
                    const voiceButton = document.getElementById('voice-button');
                    voiceButton.classList.remove('voice-pulse', 'bg-red-400', 'text-white');
                    voiceButton.classList.add('bg-blue-100', 'text-blue-700');
                };
                
                recognition.start();
            }
        }

        function stopListening() {
            if (recognition && isListening) { // Ensure only stop if actually listening
                recognition.stop();
                isListening = false;
                const voiceButton = document.getElementById('voice-button');
                voiceButton.classList.remove('voice-pulse', 'bg-red-400', 'text-white');
                voiceButton.classList.add('bg-blue-100', 'text-blue-700');
            }
        }

        function speakText(text) {
            if (speechSynthesis) {
                speechSynthesis.cancel(); // Stop any current speech
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'pt-BR';
                utterance.rate = 0.9; // Slightly slower for better comprehension
                utterance.pitch = 1;
                speechSynthesis.speak(utterance);
            }
        }

        // Explain again function
        function explainAgain() {
            const lastBotMessage = messages.filter(m => !m.isUser).pop();
            if (lastBotMessage) {
                addUserMessage("Por favor, explique de novo mais devagar üôè");
                showTypingIndicator();
                setTimeout(() => {
                    hideTypingIndicator();
                    addBotMessage("Claro! Vou explicar novamente com mais calma e detalhes:\n\n" + lastBotMessage.text + "\n\nEntendeu melhor agora? Se ainda tiver d√∫vida, me fale! üòäüíô");
                }, 2000);
            } else {
                addUserMessage("Por favor, explique de novo mais devagar üôè");
                showTypingIndicator();
                setTimeout(() => {
                    hideTypingIndicator();
                    addBotMessage("N√£o tenho uma mensagem anterior para repetir, mas estou pronta para te ajudar com qualquer outra coisa! üòä");
                }, 2000);
            }
        }

        // Reminder functions
        function updateReminderPreview() {
            const text = document.getElementById('reminder-text').value;
            const time = document.getElementById('reminder-time').value;
            const preview = document.getElementById('reminder-preview');
            const createBtn = document.getElementById('create-reminder-btn');
            const createBtnText = document.getElementById('create-btn-text');
            
            if (text.trim() && time) { // Both text and time are required
                preview.classList.remove('hidden');
                document.getElementById('preview-text').textContent = text;
                document.getElementById('preview-time').textContent = `‚è∞ ${time}`;
                
                createBtn.disabled = false;
                createBtnText.textContent = `Criar Lembrete "${text}"`;
            } else {
                preview.classList.add('hidden');
                createBtn.disabled = true;
                createBtnText.textContent = 'Criar Lembrete';
            }
        }

        function setReminderText(text) {
            document.getElementById('reminder-text').value = text;
            updateReminderPreview();
        }

        function clearReminderText() {
            document.getElementById('reminder-text').value = '';
            updateReminderPreview();
        }

        function setReminderTime(time) {
            document.getElementById('reminder-time').value = time;
            updateVisualTime();
            updateReminderPreview();
        }

        function updateVisualTime() {
            const time = document.getElementById('reminder-time').value;
            document.getElementById('visual-time').textContent = time;
            document.getElementById('visual-time-formatted').textContent = time;
            updateReminderPreview();
        }

        function voiceReminderInput() {
            if (recognition) {
                const voiceButton = document.getElementById('voice-reminder-button');
                voiceButton.classList.add('voice-pulse', 'bg-red-400', 'text-white');
                voiceButton.classList.remove('bg-blue-100', 'text-blue-700');
                voiceButton.innerHTML = '<i data-lucide="mic" class="w-6 h-6"></i> Ouvindo...';
                lucide.createIcons(); // Re-render icon
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    setReminderText(transcript);
                    voiceButton.classList.remove('voice-pulse', 'bg-red-400', 'text-white');
                    voiceButton.classList.add('bg-blue-100', 'text-blue-700');
                    voiceButton.innerHTML = '<i data-lucide="mic" class="w-6 h-6"></i> Falar';
                    lucide.createIcons();
                };
                
                recognition.onerror = function(event) {
                    console.error('Speech recognition error (reminder):', event.error);
                    voiceButton.classList.remove('voice-pulse', 'bg-red-400', 'text-white');
                    voiceButton.classList.add('bg-blue-100', 'text-blue-700');
                    voiceButton.innerHTML = '<i data-lucide="mic" class="w-6 h-6"></i> Falar';
                    lucide.createIcons();
                    alert('N√£o consegui ouvir. Tente novamente!');
                };
                
                recognition.start();
            } else {
                alert('Seu navegador n√£o suporta reconhecimento de voz. Por favor, digite o lembrete.');
            }
        }

        function createReminder() {
            const text = document.getElementById('reminder-text').value.trim();
            const time = document.getElementById('reminder-time').value;
            
            if (text && time) {
                const reminder = {
                    id: Date.now(),
                    text: text,
                    time: time,
                    created: new Date()
                };
                
                reminders.push(reminder);
                localStorage.setItem('reminders', JSON.stringify(reminders));
                updateRemindersDisplay();
                
                showView('chat');
                addUserMessage(`Quero criar um lembrete: "${text}" para √†s ${time}`);
                setTimeout(() => {
                    addBotMessage(`‚úÖ Perfeito! Criei seu lembrete para "${text}" √†s ${time}. Vou te avisar na hora certa! üòä Cuidar da sua sa√∫de e rotina √© muito importante. Voc√™ est√° indo muito bem! üíô‚≠ê`);
                }, 1500);
                
                // Clear form
                document.getElementById('reminder-text').value = '';
                document.getElementById('reminder-time').value = '14:00';
                updateReminderPreview();
                updateVisualTime();
            } else {
                alert('Por favor, preencha o que lembrar e o hor√°rio para criar o lembrete.');
            }
        }

        function updateRemindersDisplay() {
            document.getElementById('profile-reminders-count').textContent = reminders.length;
            
            if (reminders.length > 0) {
                document.getElementById('active-reminders').classList.remove('hidden');
                const remindersList = document.getElementById('reminders-list');
                remindersList.innerHTML = '';
                
                // Display up to 3 most recent reminders
                reminders.slice(-3).forEach(reminder => {
                    const reminderElement = document.createElement('div');
                    reminderElement.className = 'bg-purple-50 p-4 rounded-2xl';
                    reminderElement.innerHTML = `
                        <p class="text-lg font-semibold text-purple-700">${reminder.text}</p>
                        <p class="text-purple-600">‚è∞ ${reminder.time}</p>
                    `;
                    remindersList.appendChild(reminderElement);
                });
            } else {
                document.getElementById('active-reminders').classList.add('hidden');
            }
        }

        // Profile functions
        function toggleProfile() {
            const modal = document.getElementById('profile-modal');
            if (modal.classList.contains('hidden')) {
                modal.classList.remove('hidden');
                document.getElementById('profile-conversations-count').textContent = Math.floor(messages.length / 2); // Roughly count bot messages
            } else {
                modal.classList.add('hidden');
            }
        }

        function closeProfile() {
            document.getElementById('profile-modal').classList.add('hidden');
        }

        function handleNameKeyPress(event) {
            if (event.key === 'Enter') {
                const newName = event.target.value.trim();
                if (newName) {
                    userName = newName;
                    localStorage.setItem('userName', userName);
                    updateUserName();
                    closeProfile();
                } else {
                    alert('Por favor, digite um nome v√°lido.');
                }
            }
        }

        function updateUserName() {
            document.getElementById('welcome-name').textContent = userName || 'Visitante';
            document.getElementById('profile-name').textContent = userName || 'Visitante';
            document.getElementById('main-username').textContent = userName || 'querido(a)';
        }

        // Get motivational phrase
        function getMotivationalPhrase() {
            const phrase = motivationalPhrases[Math.floor(Math.random() * motivationalPhrases.length)];
            showView('chat');
            addUserMessage("Quero uma frase motivacional");
            setTimeout(() => {
                addBotMessage(phrase);
            }, 1000);
        }

        // Monitor input changes (ensure event listeners are only added once)
        document.addEventListener('DOMContentLoaded', function() {
            const messageInput = document.getElementById('message-input');
            if (messageInput) {
                messageInput.addEventListener('input', updateInputButtons);
            }
            
            const reminderTextInput = document.getElementById('reminder-text');
            if (reminderTextInput) {
                reminderTextInput.addEventListener('input', updateReminderPreview);
            }
            
            const reminderTimeInput = document.getElementById('reminder-time');
            if (reminderTimeInput) {
                reminderTimeInput.addEventListener('change', updateVisualTime);
                reminderTimeInput.addEventListener('input', updateReminderPreview); // Also update preview on input
            }
            updateReminderPreview(); // Initial check for reminder button state
        });

        // Accessibility improvements
        document.addEventListener('keydown', function(event) {
            // ESC key to close modals
            if (event.key === 'Escape') {
                closeProfile();
            }
            
            // Ctrl+Enter to send message
            if (event.ctrlKey && event.key === 'Enter') {
                if (currentView === 'chat') {
                    sendMessage();
                }
            }
        });

        // Service Worker Registration (for PWA functionality)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed');
                    });
            });
        }
    </script>
</body>
</html>
